---
title: Python中深拷贝与浅拷贝的区别
copyright: true
top: 95
date: 2018-08-18 18:48:44
categories: [Python]
tags: [Python]
image: http://pic1.win4000.com/wallpaper/2017-12-08/5a29fbf073a6d.jpg
description: 在Python中对象的赋值其实就是对象的引用。当创建一个对象，把它赋值给另一个变量的时候，python并没有拷贝这个对象，只是拷贝了这个对象的引用而已。
---
<span>
<!--more-->

### 定义：

<div class="note default">在Python中对象的赋值其实就是对象的引用。当创建一个对象，把它赋值给另一个变量的时候，python并没有拷贝这个对象，只是拷贝了这个对象的引用而已。</p></div>

<br/>

<div class="note primary">浅拷贝：拷贝了最外围的对象本身，内部的元素都只是拷贝了一个引用而已。也就是，把对象复制一遍，但是该对象中引用的其他对象我不复制</p></div>

<div class="note primary">深拷贝：外围和内部元素都进行了拷贝对象本身，而不是引用。也就是，把对象复制一遍，并且该对象中引用的其他对象我也复制。</p></div>

### 几个术语的解释：

<div class="note default">1，变量：是一个系统表的元素，拥有指向对象的连接空间  
2，对象：被分配的一块内存，存储其所代表的值  
3，引用：是自动形成的从变量到对象的指针  
4，注意：类型（int类型，long类型(python3已去除long类型，只剩下int类型的数据)）属于对象，不是变量  
5，不可变对象：一旦创建就不可修改的对象，包括字符串、元组、数字  
6，可变对象：可以修改的对象，包括列表、字典。</p></div>

### 应用的范围：

<div class="note default">1，切片可以应用于：列表、元组、字符串，但不能应用于字典。  
2，深浅拷贝，既可应用序列（列表、元组、字符串），也可应用字典。</p></div>

### 深浅拷贝的作用：

<div class="note default">1，减少内存的使用  
2，以后在做数据的清洗、修改或者入库的时候，对原数据进行复制一份，以防数据修改之后，找不到原数据。</p></div>

### 对于不可变对象的深浅拷贝：

<div class="note warning">不可变对象类型，没有被拷贝的说法，即便是用深拷贝，查看id的话也是一样的，如果对其重新赋值，也只是新创建一个对象，替换掉旧的而已。
一句话就是，不可变类型，不管是深拷贝还是浅拷贝，地址值和拷贝后的值都是一样的。</p></div>

```
    a=(1,2,3)
    print("=====第一种=号浅拷贝=====")
    b=a
    print(a)
    print(b)
    print(id(a))
    print(id(b))
    print("=====另一种copy浅拷贝===")
    b=copy.copy(a)
    print(a)
    print(b)
    print(id(a))
    print(id(b))
    print("=====深拷贝=====")
    b=copy.deepcopy(a)
    print(a)
    print(b)
    print(id(a))
    print(id(b))
    # 结果如下：
    =====浅拷贝=====
    (1, 2, 3)
    (1, 2, 3)
    2814522335952
    2814522335952
    =====另一种浅拷贝===
    (1, 2, 3)
    (1, 2, 3)
    2814522335952
    2814522335952
    =====深拷贝=====
    (1, 2, 3)
    (1, 2, 3)
    2814522335952
    2814522335952
```
对于可变对象深浅拷贝:
===========

<div class="note info"><p>=浅拷贝：值相等，地址相等  
copy浅拷贝：值相等，地址不相等  
deepcopy深拷贝：值相等，地址不相等</p></div>

```
    a=[1,2,3]
    print("=====第一种=号浅拷贝=====")
    b=a
    print(a)
    print(b)
    print(id(a))
    print(id(b))
    print("=====另一种copy浅拷贝===")
    b=copy.copy(a)
    print(a)
    print(b)
    print(id(a))
    print(id(b))
    print("=====深拷贝=====")
    b=copy.deepcopy(a)
    print(a)
    print(b)
    print(id(a))
    print(id(b))
    #结果如下：
    =====浅拷贝=====
    [1, 2, 3]
    [1, 2, 3]
    2007696321544
    2007696321544
    =====另一种copy浅拷贝===
    [1, 2, 3]
    [1, 2, 3]
    2007696321544
    2007695909960
    =====深拷贝=====
    [1, 2, 3]
    [1, 2, 3]
    2007696321544
    2007696319560
```
### 总结：

<div class="note default"><p>1，深浅拷贝都是对源对象的复制，占用不同的内存空间。
2，不可变类型的对象，对于深浅拷贝毫无影响，最终的地址值和值都是相等的。
3，可变类型：  
=浅拷贝： 值相等，地址相等  
copy浅拷贝：值相等，地址不相等  
deepcopy深拷贝：值相等，地址不相等</p></div>